on:
  workflow_call:
    inputs:
      os:
        required: true
        type: string
      builder:
        required: true
        type: string
      ocaml-compiler:
        required: true
        type: string
jobs:
  build:
    runs-on: ${{ github.event.inputs.os }}
    steps:
      - name: Setup OCaml
        uses: ocaml/setup-ocaml@v2
        with:
          ocaml-compiler: ${{ github.event.inputs.ocaml-compiler }}
      - name: Make stdcompat
        run: opam exec -- sh -exc ".github/scripts/build-${{ github.event.inputs.builder }}.sh"
